<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>INanimO、、｜Smart Link</title>
<style>
  body {
    font-family: sans-serif;
    background: #0b0b10;
    color: #eee;
    padding: 30px 16px;
    text-align: center;
  }

  .wrapper {
    max-width: 520px;
    margin: 0 auto;
  }

  .jacket {
    width: 260px;
    max-width: 80%;
    border-radius: 8px;
    margin-bottom: 20px;
  }

  .btn {
    display: block;
    margin: 12px auto;
    padding: 14px 18px;
    width: 80%;
    max-width: 350px;
    background: #6a4fcf;
    border-radius: 6px;
    text-decoration: none;
    color: white;
    font-weight: bold;
  }

  /* 曲一覧用 */
  .track-list {
    margin-top: 24px;
    display: flex;
    flex-direction: column;
    gap: 12px;
  }

  .track {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 10px 12px;
    border-radius: 8px;
    background: #151520;
    text-decoration: none;
    color: #eee;
  }

  .track-jacket {
    width: 56px;
    height: 56px;
    object-fit: cover;
    border-radius: 6px;
    flex-shrink: 0;
  }

  .track-title {
    text-align: left;
    font-weight: bold;
    font-size: 14px;
  }

  .back-link {
    display: inline-block;
    margin-top: 20px;
    color: #aaa;
    text-decoration: none;
    font-size: 14px;
  }
</style>
</head>
<body>
<div class="wrapper">

  <!-- ホーム（曲一覧） -->
  <div id="home">
    <h1>INanimO、、｜Smart Link</h1>
    <p>作品を選択してください。</p>
    <div id="trackList" class="track-list"></div>
  </div>

  <!-- 個別曲ページ -->
  <div id="detail" style="display:none">
    <h2 id="title">Loading…</h2>
    <img id="jacket" class="jacket" src="" alt="jacket">
    <div id="links"></div>
    <a href="./" class="back-link">← 作品一覧に戻る</a>
  </div>

</div>

<script>
  // URL から id (linkco ID) を取得
  const params = new URLSearchParams(location.search);
  const id = params.get("id");

  const homeEl = document.getElementById("home");
  const detailEl = document.getElementById("detail");

  // 曲データ
  const tracks = {
    "Xqb83UQN": {
      title: "寂寥戦歌",
      jacket: "./assets/Sekiryo Senka.PNG",
    },
    "eqRu0BZX": {
      title: "NUMBNESS",
      jacket: "./assets/numbness.jpg",
    },
    "fMsg46gH": {
      title: "ネアニオン",
      jacket: "./assets/neanion.JPG",
    },
    "DSR50Zg4": {
      title: "天動説",
      jacket: "./assets/tendousetsu.JPG",
    },
    // 曲が増えたらここに追加
    // "XXXXXXX": { title: "タイトル", jacket: "./assets/xxx.jpg" },
  };

  // id がない場合 → ホーム画面（曲一覧）
  if (!id) {
    homeEl.style.display = "block";
    detailEl.style.display = "none";

    const listEl = document.getElementById("trackList");

    for (const [trackId, data] of Object.entries(tracks)) {
      const a = document.createElement("a");
      a.className = "track";
      a.href = `?id=${trackId}`;

      a.innerHTML = `
        <img src="${data.jacket}" alt="${data.title}" class="track-jacket" onerror="this.style.display='none'">
        <span class="track-title">${data.title}</span>
      `;

      listEl.appendChild(a);
    }
  } else {
    // id がある場合 → 個別曲ページ
    homeEl.style.display = "none";
    detailEl.style.display = "block";

    const track = tracks[id];
    const title = track ? track.title : "INanimO、、";
    const jacketPath = track ? track.jacket : "";

    // タイトル＆ジャケ
    document.getElementById("title").textContent = title;
    const jacketImg = document.getElementById("jacket");
    jacketImg.src = jacketPath;
    jacketImg.onerror = () => { jacketImg.style.display = "none"; };

    // 基本の linkco URL
    const base = `https://linkco.re/${id}`;

    // サブスクの自動生成
    const services = {
      "Apple Music": `${base}?utm_source=apple`,
      "Spotify": `${base}?utm_source=spotify`,
      "YouTube Music": `${base}?utm_source=youtube`,
      "LINE MUSIC": `${base}?utm_source=line`,
      "Amazon Music": `${base}?utm_source=amazon`,
    };

    // HTML に追加
    const linksDiv = document.getElementById("links");
    for (const [name, url] of Object.entries(services)) {
      const a = document.createElement("a");
      a.className = "btn";
      a.href = url;
      a.textContent = name;
      linksDiv.appendChild(a);
    }
  }
</script>

</body>
</html>

